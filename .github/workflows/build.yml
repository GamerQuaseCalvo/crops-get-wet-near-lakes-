name: Build Stardew Valley Mod

on:
  push:
    branches:
      - main
  pull_request:
    branches:
      - main

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    - name: Check out the repository
      uses: actions/checkout@v2

    - name: Set up .NET SDK 9.0.200
      run: |
        wget https://download.visualstudio.microsoft.com/download/pr/3606de37-1325-4f5f-bbe9-1bc44b3c1c7f/91872629e9f0c205cace9c462d5e89a4/dotnet-sdk-9.0.200-linux-x64.tar.gz
        mkdir -p $HOME/dotnet
        tar -zxf dotnet-sdk-9.0.200-linux-x64.tar.gz -C $HOME/dotnet
        export PATH=$PATH:$HOME/dotnet

    - name: Install dependencies
      run: |
        sudo apt-get update
        sudo apt-get install -y mono-complete # Caso precise do Mono também, se estiver usando

    - name: Build the mod
      run: |
        # Compilar o mod, com referência à pasta src e todas as DLLs
        mcs -target:library -r:src/*.dll -out:MeuMod.dll src/Mod.cs

    - name: Upload Artifact
      uses: actions/upload-artifact@v4
      with:
        name: MeuMod
        path: MeuMod.dll